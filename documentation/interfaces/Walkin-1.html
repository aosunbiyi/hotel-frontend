<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>hotel-app documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">hotel-app documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content interface">
                   <div class="content-data">












<ol class="breadcrumb">
  <li>Interfaces</li>
  <li>Walkin</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/Components/front-office/booking-list/booking-list.component.ts</code>
        </p>



        <section>
            <h3 id="index">Index</h3>
            <table class="table table-sm table-bordered index-table">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <h6><b>Properties</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                        <a href="#guestName">guestName</a>
                                </li>
                                <li>
                                        <a href="#id">id</a>
                                </li>
                                <li>
                                        <a href="#identity">identity</a>
                                </li>
                                <li>
                                        <a href="#rate">rate</a>
                                </li>
                                <li>
                                        <a href="#room">room</a>
                                </li>
                                <li>
                                        <a href="#roomType">roomType</a>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>



            <section>
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="guestName"></a>
                                        <span class="name"><b>guestName</b><a href="#guestName"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>guestName:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="id"></a>
                                        <span class="name"><b>id</b><a href="#id"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>id:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="identity"></a>
                                        <span class="name"><b>identity</b><a href="#identity"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>identity:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="rate"></a>
                                        <span class="name"><b>rate</b><a href="#rate"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>rate:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="room"></a>
                                        <span class="name"><b>room</b><a href="#room"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>room:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="roomType"></a>
                                        <span class="name"><b>roomType</b><a href="#roomType"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>roomType:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
            </section>
    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Component, OnInit, ViewChild } from &#x27;@angular/core&#x27;;
import { ClrWizard, ClrForm, ClrWizardPage } from &#x27;@clr/angular&#x27;;
import { FormGroup, FormControl, Validators, FormBuilder } from &#x27;@angular/forms&#x27;;
import { LocalDate, LocalTime } from &#x27;js-joda&#x27;;
import * as lodash from &#x27;lodash&#x27;;
import * as CN from &#x27;countrycitystatejson&#x27;;

import { BusinessSourceTypesService } from &#x27;../../../services/business-source-types.service&#x27;;
import { BusinessSourceService } from &#x27;../../../services/business-source.service&#x27;;
import { RoomsService } from &#x27;../../../services/rooms.service&#x27;;
import { RoomtypeService } from &#x27;../../../services/roomtype.service&#x27;;
import { ReservationsService } from &#x27;../../../services/reservations.service&#x27;;
import { DiscountService } from &#x27;../../../services/discount.service&#x27;;
import { PaymentMethodService } from &#x27;../../../services/payment-method.service&#x27;;
import { AccountsService } from &#x27;../../../services/accounts.service&#x27;;

import { FieldTypeFilter } from &#x27;../../../Utils/Util_Filter&#x27;;


@Component({
  selector: &#x27;app-booking-list&#x27;,
  templateUrl: &#x27;./booking-list.component.html&#x27;,
  styleUrls: [&#x27;./booking-list.component.css&#x27;]
})
export class BookingListComponent implements OnInit {
  @ViewChild(&#x27;wizardxl&#x27;) wizardExtraLarge: ClrWizard;
  @ViewChild(&#x27;page1&#x27;) page1: ClrWizardPage;
  @ViewChild(&#x27;arrivalData&#x27;) arrivalData;
  @ViewChild(&#x27;departureDate&#x27;) departureDate;
  fieldTypeFilter &#x3D; new FieldTypeFilter;

  open_wizard &#x3D; false;
  model: any;
  bookingForm: FormGroup;
  userForm: FormGroup;
  businessForm: FormGroup;
  paymentForm: FormGroup;
  submitted &#x3D; false;

  businessSourceTypes: any &#x3D; [];
  businessSources: any &#x3D; [];
  roomTypes: any &#x3D; [];
  rooms: any &#x3D; [];
  roomRate: any;
  selectedRoom: any;
  selectedReservation: any;


  dropdownList &#x3D; [];
  selectedItems &#x3D; [];
  dropdownSettings &#x3D; {};
  selectedRooms &#x3D; [];
  discountList &#x3D; [];
  paymentMethods &#x3D; [];
  reservationList &#x3D; [];
  reservation_transactions &#x3D; [];
  reservation_transaction_list &#x3D; [];
  countries &#x3D; [];
  states &#x3D; [];

  isCheque &#x3D; false;
  applyDiscount &#x3D; false;



  constructor(
    private formBuilder: FormBuilder,
    private businessSourceTypesService: BusinessSourceTypesService,
    private businessSourceService: BusinessSourceService,
    private roomsService: RoomsService,
    private roomtypeService: RoomtypeService,
    private reservationsService: ReservationsService,
    private discountService: DiscountService,
    private paymentMethodService: PaymentMethodService,
    private accountService: AccountsService) { }

  ngOnInit() {

    this.paymentForm &#x3D; this.formBuilder.group({
      payment_method: [&#x27;&#x27;, Validators.required],
      total_amount: [&#x27;&#x27;, Validators.required],
      amount: [&#x27;&#x27;, Validators.required],
      balance: [&#x27;&#x27;],
      cheque: [&#x27;&#x27;],
      account_number: [&#x27;&#x27;],
      bank_name: [&#x27;&#x27;],
      branch_name: [&#x27;&#x27;],
      discount_plan: [&#x27;&#x27;],
      discount_value: [&#x27;&#x27;],
      discount_code: [&#x27;&#x27;],
      apply_discount: [&#x27;&#x27;]
    });

    this.bookingForm &#x3D; this.formBuilder.group({
      arrival: [&#x27;&#x27;, Validators.required],
      departure: [&#x27;&#x27;],
      num_of_night: [&#x27;&#x27;, Validators.required],
      account_id: [&#x27;&#x27;],
      book_by: [&#x27;&#x27;],
      book_on: [&#x27;&#x27;],
      payment_method: [&#x27;&#x27;]
    });

    this.userForm &#x3D; this.formBuilder.group({
      last_name: [&#x27;&#x27;, Validators.required],
      first_name: [&#x27;&#x27;, Validators.required],
      address1: [&#x27;&#x27;, Validators.required],
      address2: [&#x27;&#x27;],
      city: [&#x27;&#x27;, Validators.required],
      postal_code: [&#x27;&#x27;],
      state: [&#x27;&#x27;, Validators.required],
      country: [&#x27;&#x27;, Validators.required],
      phone: [&#x27;&#x27;, Validators.required],
      email: [&#x27;&#x27;, [Validators.required, Validators.email]],
      fax: [&#x27;&#x27;],
      id: [&#x27;&#x27;]
    });

    this.businessForm &#x3D; this.formBuilder.group({
      business_source_id: [&#x27;&#x27;, Validators.required],
      room_type_id: [&#x27;&#x27;, Validators.required]
    });



    this.businessSourceTypesService.getBusinessSourceTypes().subscribe(data &#x3D;&gt; {
      this.businessSourceTypes &#x3D; data;
    });

    this.roomtypeService.getRoomTypes().subscribe(data &#x3D;&gt; {
      this.roomTypes &#x3D; data;

    });

    this.discountService.getDiscounts().subscribe(data &#x3D;&gt; {
      this.discountList &#x3D; data;
    });

    this.paymentMethodService.getPaymentMethods().subscribe(data &#x3D;&gt; {
      this.paymentMethods &#x3D; data;
    });

    this.reservationsService.getReservations().subscribe(data &#x3D;&gt; {
      this.reservationList &#x3D; data;
      this.reservationList.forEach((dt) &#x3D;&gt; {
        dt.fullname &#x3D; dt.account_.first_name + &#x27; &#x27; + dt.account_.last_name;
      });
      console.log(this.reservationList);
    });


    this.dropdownSettings &#x3D; {
      singleSelection: true,
      idField: &#x27;item_id&#x27;,
      textField: &#x27;item_text&#x27;,
      selectAllText: &#x27;Select All&#x27;,
      unSelectAllText: &#x27;UnSelect All&#x27;,
      itemsShowLimit: 10,
      allowSearchFilter: true
    };

    this.countries &#x3D; CN.getCountries();

  }

  onCountryChange(event) {
    this.states &#x3D; CN.getStatesByShort(event.target.value);
  }

  public doCustomClick(buttonType: string): void {
    if (&#x27;custom-finish&#x27; &#x3D;&#x3D;&#x3D; buttonType) {
      this.wizardExtraLarge.next();
    }

    if (&#x27;custom-previous&#x27; &#x3D;&#x3D;&#x3D; buttonType) {
      this.wizardExtraLarge.previous();
    }

    if (&#x27;custom-danger&#x27; &#x3D;&#x3D;&#x3D; buttonType) {
      this.onFinish();
      console.log(this.paymentForm.value);
    }


  }


  public doCustomClick2(buttonType: string): void {
    if (&#x27;custom-previous&#x27; &#x3D;&#x3D;&#x3D; buttonType) {
      this.wizardExtraLarge.previous();
    }

    if (&#x27;custom-next&#x27; &#x3D;&#x3D;&#x3D; buttonType) {
      this.wizardExtraLarge.next();
    }

  }

  public doCustomClick3(buttonType: string): void {
    if (&#x27;custom-previous&#x27; &#x3D;&#x3D;&#x3D; buttonType) {
      this.wizardExtraLarge.previous();
    }

    if (&#x27;custom-next&#x27; &#x3D;&#x3D;&#x3D; buttonType) {

      const data &#x3D; {
        bookingForm: this.bookingForm.value,
        userForm: this.userForm.value,
        businessForm: this.businessForm.value,
        rms: this.selectedRooms
      };

      this.reservationsService.get_total_reservation_rate(data).subscribe(r &#x3D;&gt; {
        this.reservation_transaction_list &#x3D; r.reservation_transaction;
        this.paymentForm.setValue({
          payment_method: 0,
          total_amount: this.getTotalReservation400(this.reservation_transaction_list)[0].total,
          amount: 0,
          balance: 0,
          cheque: 0,
          account_number: 0,
          bank_name: &#x27;&#x27;,
          branch_name: &#x27;&#x27;,
          discount_plan: 0,
          discount_value: 0,
          discount_code: &#x27;&#x27;,
          apply_discount: false
        });
        this.wizardExtraLarge.next();
      });
    }

  }

  onAmountLeave(value: string) {
    const amount &#x3D; parseFloat(value);
    const total &#x3D; this.paymentForm.value.total_amount;
    const balance &#x3D; total - amount;

    this.paymentForm.setValue({
      payment_method: 0,
      total_amount: this.paymentForm.value.total_amount,
      amount: amount,
      balance: balance,
      cheque: 0,
      account_number: 0,
      bank_name: &#x27;&#x27;,
      branch_name: &#x27;&#x27;,
      discount_plan: 0,
      discount_value: 0,
      discount_code: &#x27;&#x27;,
      apply_discount: false
    });

  }

  onPhoneLeave(value: string) {

    this.accountService.getAccountByPhone(value).subscribe(data &#x3D;&gt; {
      console.log(data);
      delete data.account_number;
      delete data.account_type_;
      delete data.account_type_id;
      delete data.alias;
      delete data.card_holder;
      delete data.card_number;
      delete data.created;
      delete data.created_by;
      delete data.created_on;
      delete data.credit_card_type;
      delete data.credit_limit;
      delete data.exp_date;
      delete data.hotel_representative_;
      delete data.hotel_representative_id;
      delete data.modified;
      delete data.opening_balance;
      delete data.payment_term;
      delete data.reg_number;
      delete data.reg_number1;
      delete data.reg_number2;
      delete data.remark;
      delete data.reservations;
      this.states &#x3D; CN.getStatesByShort(data.country);
      this.userForm.setValue(data);
    });
  }

  onEmailLeave(value: string) {

    this.accountService.getAccountByEmail(value).subscribe(data &#x3D;&gt; {
      console.log(data);
      delete data.account_number;
      delete data.account_type_;
      delete data.account_type_id;
      delete data.alias;
      delete data.card_holder;
      delete data.card_number;
      delete data.created;
      delete data.created_by;
      delete data.created_on;
      delete data.credit_card_type;
      delete data.credit_limit;
      delete data.exp_date;
      delete data.hotel_representative_;
      delete data.hotel_representative_id;
      delete data.modified;
      delete data.opening_balance;
      delete data.payment_term;
      delete data.reg_number;
      delete data.reg_number1;
      delete data.reg_number2;
      delete data.remark;
      delete data.reservations;
      this.states &#x3D; CN.getStatesByShort(data.country);
      this.userForm.setValue(data);
    });
  }



  onPaymentMethodChange(event) {
    if (event.target.value &#x3D;&#x3D;&#x3D; &#x27;Cheque&#x27;) {
      this.isCheque &#x3D; true;
    } else {
      this.isCheque &#x3D; false;
    }
  }

  onReservationSelected(rs) {
    console.log(rs);
    this.selectedReservation &#x3D; rs;
  }

  onDiscountChange(event) {
    this.applyDiscount &#x3D; event.target.checked;
    this.paymentForm.setValue({
      payment_method: this.paymentForm.value.payment_method,
      total_amount: this.paymentForm.value.total_amount,
      amount: this.paymentForm.value.amount,
      balance: this.paymentForm.value.balance,
      cheque: 0,
      account_number: 0,
      bank_name: &#x27;&#x27;,
      branch_name: &#x27;&#x27;,
      discount_plan: 0,
      discount_value: 0,
      discount_code: &#x27;&#x27;,
      apply_discount: this.applyDiscount
    });

  }

  deleteRoom(rm) {
    lodash.remove(this.selectedRooms, { id: rm.id });

  }

  // convenience getter for easy access to form fields
  get f() { return this.bookingForm.controls; }

  onItemSelect(item: any) {

    // tslint:disable-next-line:no-shadowed-variable
    const room &#x3D; this.dropdownList.find(function (element) {
      return element.item_id &#x3D;&#x3D;&#x3D; item.item_id;
    });

    this.selectedRooms.push(JSON.parse(room.object_text));

  }
  onSelectAll(items: any) {

  }

  addRoom() {
    const vm &#x3D; this;
    if (this.selectedRoom !&#x3D;&#x3D; null) {
      if (!this.isExist(this.selectedRoom)) {
        const rm &#x3D; this.rooms.find(function (r) {
          // tslint:disable-next-line:radix
          return r.id &#x3D;&#x3D;&#x3D; parseInt(vm.selectedRoom);
        });
        this.selectedRooms.push(rm);
        this.selectedRoom &#x3D; null;
      }
    }
  }

  isExist(id) {
    const isExist &#x3D; this.selectedRooms.find(function (rm) {
      return rm.id &#x3D;&#x3D;&#x3D; parseInt(id, 10);
    });
    return isExist;
  }


  onRoomselected(event) {
    this.selectedRoom &#x3D; event.target.value;
  }


  onSubmit() {
    this.submitted &#x3D; true;
    // stop here if form is invalid
    if (this.bookingForm.invalid) {
      return;
    }

    alert(&#x27;SUCCESS!! :-)\n\n&#x27; + JSON.stringify(this.bookingForm.value));
  }



  onFinish() {


    const data &#x3D; {
      bookingForm: this.bookingForm.value,
      userForm: this.userForm.value,
      businessForm: this.businessForm.value,
      rms: this.selectedRooms,
      paymentForm: this.paymentForm.value
    };

    //console.log(data);

    this.reservationsService.post_reservations(data).subscribe(r &#x3D;&gt; {
      console.log(r);
      this.reservationsService.getReservations().subscribe(data2 &#x3D;&gt; {
        this.reservationList &#x3D; data2;
        this.wizardExtraLarge.navService.setCurrentPage(this.page1);
        this.open_wizard &#x3D; false;
      });

    });


  }

  onNew() {
    this.open_wizard &#x3D; true;
  }

  onNightChange(event) {
    const total_days &#x3D; event.target.value;
    const myDate &#x3D; new Date(this.arrivalData.nativeElement.value);
    let day &#x3D; myDate.getDate().toString();
    if (day.length &#x3D;&#x3D;&#x3D; 1) {
      day &#x3D; &#x27;0&#x27; + day;
    }
    const datet1 &#x3D; LocalDate.parse(&#x60;${myDate.getFullYear()}-${myDate.getMonth() + 1}-${day}&#x60;);
    // tslint:disable-next-line:radix
    const datet2 &#x3D; datet1.plusDays(parseInt(total_days));
    this.departureDate.nativeElement.value &#x3D; datet2;

  }

  onBusinessSourceChanged(event) {
    this.businessSourceService.getByBusinessSourceTypeId(event.target.value).subscribe(data &#x3D;&gt; {
      this.businessSources &#x3D; data;
    });
  }

  getTotalReservation400(reservation_transaction: any) {
    const output &#x3D; lodash(reservation_transaction)
      .groupBy(&#x27;id&#x27;)
      .map((objs, key) &#x3D;&gt; ({
        &#x27;id&#x27;: key,
        &#x27;total&#x27;: lodash.sumBy(objs, &#x27;total&#x27;)
      }))
      .value();

    return output;
  }


  getTotalReservation(reservation_transaction: any) {
    const output &#x3D; lodash(reservation_transaction)
      .groupBy(&#x27;reservation_id&#x27;)
      .map((objs, key) &#x3D;&gt; ({
        &#x27;reservation_id&#x27;: key,
        &#x27;total_reservation&#x27;: lodash.sumBy(objs, &#x27;total_reservation&#x27;)
      }))
      .value();

    return output;
  }

  getTotalExtraAdult(reservation_transaction: any) {
    const output &#x3D; lodash(reservation_transaction)
      .groupBy(&#x27;reservation_id&#x27;)
      .map((objs, key) &#x3D;&gt; ({
        &#x27;reservation_id&#x27;: key,
        &#x27;total_adult&#x27;: lodash.sumBy(objs, &#x27;total_adult&#x27;)
      }))
      .value();

    return output;
  }

  getTotalExtraChildren(reservation_transaction: any) {
    const output &#x3D; lodash(reservation_transaction)
      .groupBy(&#x27;reservation_id&#x27;)
      .map((objs, key) &#x3D;&gt; ({
        &#x27;reservation_id&#x27;: key,
        &#x27;total_children&#x27;: lodash.sumBy(objs, &#x27;total_children&#x27;)
      }))
      .value();

    return output;
  }

  showTransactionDetails(rm) {
    this.reservationsService.GetReservationDetailsByReservationId(rm.id).subscribe(data &#x3D;&gt; {
      rm.reservation_transaction &#x3D; data.result;
      console.log(rm);
    });
  }

  onRoomTypeselected(event) {
    // tslint:disable-next-line:radix
    const id &#x3D; parseInt(event.target.value);
    this.roomtypeService.getRoomTypeRates(id).subscribe(data &#x3D;&gt; {
      this.roomRate &#x3D; data;
    });

    this.roomTypes.forEach(rt &#x3D;&gt; {
      if (rt.id &#x3D;&#x3D;&#x3D; id) {
        this.rooms &#x3D; rt.rooms;
        this.rooms.forEach(data &#x3D;&gt; {
          data.room_type_name &#x3D; rt.room_type_name;
          data.extra_adult &#x3D; &#x27;0&#x27;;
          data.extra_children &#x3D; &#x27;0&#x27;;
          data.discount_plan &#x3D; &#x27;0&#x27;;
          data.discount_value &#x3D; &#x27;0&#x27;;
          data.discount_code &#x3D; &#x27;0&#x27;;

          this.dropdownList.push({
            id: data.id, text: data.room_name, obj: JSON.stringify(data)
          });
        });

      }
    });


  }


  getDiscountStatus(onDiscount, sl) {
    if (onDiscount &#x3D;&#x3D;&#x3D; 1) {
      return &#x27;&lt;a  class&#x3D;&quot;label label-purple clickable&quot;&gt;Yes&lt;span class&#x3D;&quot;badge&quot;&gt;&#x27; + sl.discount_amount + &#x27;&lt;/span&gt;&lt;/a&gt;&#x27;;
    } else {
      return &#x27;&lt;span class&#x3D;&quot;label label-warning&quot;&gt;No&lt;/span&gt;&#x27;;
    }
  }

  getReservationStatus(status) {

    if (status &#x3D;&#x3D;&#x3D; &#x27;Open&#x27;) {
      return &#x27;&lt;span class&#x3D;&quot;label label-success&quot;&gt;Open&lt;/span&gt;&#x27;;
    } else {
      return &#x27;&lt;span class&#x3D;&quot;label label-info&quot;&gt;Close&lt;/span&gt;&#x27;;
    }
  }

}




export interface Walkin {
  id: number;
  guestName: string;
  identity: string;
  roomType: string;
  room: string;
  rate: number;
}
</code></pre>
    </div>
</div>






                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'interface';
            var COMPODOC_CURRENT_PAGE_URL = 'Walkin-1.html';
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
